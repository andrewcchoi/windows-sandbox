{
  "version": "2.2.2",
  "description": "Master catalog of secret handling patterns for DevContainer setup",
  "categories": {
    "git_auth": {
      "description": "Git authentication secrets (SSH keys, tokens)",
      "mode_minimum": "intermediate",
      "secrets": {
        "GIT_AUTH_TOKEN": {
          "description": "Personal access token for private Git repositories",
          "mount_type": "env",
          "required_for": ["GitHub", "GitLab", "Bitbucket"],
          "mode_minimum": "intermediate",
          "security_level": "critical",
          "vs_code_input": {
            "type": "promptString",
            "description": "Git personal access token",
            "password": true
          },
          "example_usage": {
            "dockerfile": "# No example - use VS Code input variables, not ARG/ENV",
            "devcontainer_json": {
              "containerEnv": {
                "GIT_AUTH_TOKEN": "${input:gitToken}"
              },
              "inputs": {
                "gitToken": {
                  "type": "promptString",
                  "description": "Git personal access token",
                  "password": true
                }
              }
            }
          }
        },
        "SSH_PRIVATE_KEY": {
          "description": "SSH private key for Git operations",
          "mount_type": "ssh",
          "required_for": ["Private Git repositories"],
          "mode_minimum": "intermediate",
          "security_level": "critical",
          "example_usage": {
            "dockerfile": "# Mount SSH key during build\nRUN --mount=type=ssh git clone git@github.com:private/repo.git",
            "docker_compose": "# Build with SSH agent\ndocker compose build --ssh default"
          }
        }
      }
    },
    "database_creds": {
      "description": "Database credentials and connection strings",
      "mode_minimum": "advanced",
      "secrets": {
        "DB_PASSWORD": {
          "description": "Database password (never use ENV in production!)",
          "mount_type": "secret",
          "required_for": ["PostgreSQL", "MySQL", "MongoDB"],
          "mode_minimum": "basic",
          "security_level": "critical",
          "vs_code_input": {
            "type": "promptString",
            "description": "Database password",
            "password": true
          },
          "example_usage": {
            "dockerfile": "# Read from secret mount\nRUN --mount=type=secret,id=db_password \\\n    DB_PASSWORD=$(cat /run/secrets/db_password) && \\\n    setup_database.sh",
            "devcontainer_json": {
              "containerEnv": {
                "POSTGRES_PASSWORD": "${input:dbPassword}"
              },
              "inputs": {
                "dbPassword": {
                  "type": "promptString",
                  "description": "PostgreSQL password",
                  "password": true
                }
              }
            }
          }
        },
        "DATABASE_CONNECTION_STRING": {
          "description": "Full database connection URL with credentials",
          "mount_type": "secret",
          "required_for": ["All databases"],
          "mode_minimum": "advanced",
          "security_level": "critical",
          "example_usage": {
            "dockerfile": "# Read connection string from secret\nRUN --mount=type=secret,id=db_url \\\n    DATABASE_URL=$(cat /run/secrets/db_url) app migrate",
            "devcontainer_json": {
              "containerEnv": {
                "DATABASE_URL": "postgresql://${input:dbUser}:${input:dbPassword}@postgres:5432/mydb"
              }
            }
          }
        }
      }
    },
    "api_secrets": {
      "description": "API keys and authentication tokens",
      "mode_minimum": "advanced",
      "secrets": {
        "OPENAI_API_KEY": {
          "description": "OpenAI API authentication key",
          "mount_type": "secret",
          "required_for": ["OpenAI API"],
          "mode_minimum": "advanced",
          "security_level": "critical",
          "vs_code_input": {
            "type": "promptString",
            "description": "OpenAI API key",
            "password": true
          },
          "example_usage": {
            "dockerfile": "# Never put API keys in Dockerfile!",
            "devcontainer_json": {
              "containerEnv": {
                "OPENAI_API_KEY": "${input:openaiKey}"
              },
              "inputs": {
                "openaiKey": {
                  "type": "promptString",
                  "description": "OpenAI API key",
                  "password": true
                }
              }
            }
          }
        },
        "ANTHROPIC_API_KEY": {
          "description": "Anthropic API authentication key",
          "mount_type": "secret",
          "required_for": ["Anthropic API"],
          "mode_minimum": "advanced",
          "security_level": "critical",
          "vs_code_input": {
            "type": "promptString",
            "description": "Anthropic API key",
            "password": true
          },
          "example_usage": {
            "devcontainer_json": {
              "containerEnv": {
                "ANTHROPIC_API_KEY": "${input:anthropicKey}"
              },
              "inputs": {
                "anthropicKey": {
                  "type": "promptString",
                  "description": "Anthropic API key",
                  "password": true
                }
              }
            }
          }
        },
        "GITHUB_TOKEN": {
          "description": "GitHub personal access token",
          "mount_type": "env",
          "required_for": ["GitHub API", "MCP GitHub server"],
          "mode_minimum": "intermediate",
          "security_level": "critical",
          "vs_code_input": {
            "type": "promptString",
            "description": "GitHub personal access token",
            "password": true
          },
          "example_usage": {
            "devcontainer_json": {
              "containerEnv": {
                "GITHUB_TOKEN": "${input:githubToken}"
              },
              "inputs": {
                "githubToken": {
                  "type": "promptString",
                  "description": "GitHub personal access token (repo scope)",
                  "password": true
                }
              }
            }
          }
        },
        "NPM_TOKEN": {
          "description": "NPM registry authentication token",
          "mount_type": "secret",
          "required_for": ["Private NPM packages"],
          "mode_minimum": "advanced",
          "security_level": "critical",
          "example_usage": {
            "dockerfile": "# Mount NPM token during package install\nRUN --mount=type=secret,id=npm_token \\\n    NPM_TOKEN=$(cat /run/secrets/npm_token) && \\\n    echo \"//registry.npmjs.org/:_authToken=${NPM_TOKEN}\" > ~/.npmrc && \\\n    npm install && \\\n    rm ~/.npmrc"
          }
        },
        "PYPI_TOKEN": {
          "description": "PyPI authentication token",
          "mount_type": "secret",
          "required_for": ["Private PyPI packages"],
          "mode_minimum": "advanced",
          "security_level": "critical",
          "example_usage": {
            "dockerfile": "# Mount PyPI token during package install\nRUN --mount=type=secret,id=pypi_token \\\n    PYPI_TOKEN=$(cat /run/secrets/pypi_token) && \\\n    pip config set global.extra-index-url https://token:${PYPI_TOKEN}@pypi.example.com/simple && \\\n    pip install private-package && \\\n    pip config unset global.extra-index-url"
          }
        }
      }
    },
    "cloud_creds": {
      "description": "Cloud provider credentials (AWS, GCP, Azure)",
      "mode_minimum": "advanced",
      "secrets": {
        "AWS_CREDENTIALS": {
          "description": "AWS access credentials (access key ID and secret)",
          "mount_type": "secret",
          "required_for": ["AWS services"],
          "mode_minimum": "advanced",
          "security_level": "critical",
          "example_usage": {
            "dockerfile": "# Mount AWS credentials file\nRUN --mount=type=secret,id=aws_credentials,target=/root/.aws/credentials \\\n    aws s3 sync s3://my-bucket .",
            "devcontainer_json": {
              "mounts": [
                "source=${localEnv:HOME}/.aws,target=/home/node/.aws,type=bind,consistency=cached"
              ]
            }
          },
          "warning": "NEVER use AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY as ENV variables!"
        },
        "GCP_SERVICE_ACCOUNT_KEY": {
          "description": "Google Cloud service account JSON key",
          "mount_type": "secret",
          "required_for": ["GCP services"],
          "mode_minimum": "advanced",
          "security_level": "critical",
          "example_usage": {
            "dockerfile": "# Mount GCP key during build\nRUN --mount=type=secret,id=gcp_key,target=/tmp/gcp_key.json \\\n    gcloud auth activate-service-account --key-file=/tmp/gcp_key.json && \\\n    gcloud storage cp gs://my-bucket/data .",
            "devcontainer_json": {
              "containerEnv": {
                "GOOGLE_APPLICATION_CREDENTIALS": "/run/secrets/gcp_key.json"
              },
              "mounts": [
                "source=${localEnv:HOME}/.config/gcloud,target=/home/node/.config/gcloud,type=bind"
              ]
            }
          },
          "warning": "NEVER commit service account JSON keys to Git!"
        },
        "AZURE_CREDENTIALS": {
          "description": "Azure service principal credentials",
          "mount_type": "secret",
          "required_for": ["Azure services"],
          "mode_minimum": "advanced",
          "security_level": "critical",
          "example_usage": {
            "devcontainer_json": {
              "mounts": [
                "source=${localEnv:HOME}/.azure,target=/home/node/.azure,type=bind"
              ]
            }
          }
        }
      }
    },
    "ssl_certs": {
      "description": "SSL/TLS certificates and private keys",
      "mode_minimum": "advanced",
      "secrets": {
        "SSL_CERTIFICATE": {
          "description": "SSL certificate file",
          "mount_type": "secret",
          "required_for": ["HTTPS servers", "Secure communications"],
          "mode_minimum": "advanced",
          "security_level": "critical",
          "example_usage": {
            "dockerfile": "# Mount certificate during build\nRUN --mount=type=secret,id=ssl_cert,target=/tmp/cert.pem \\\n    cp /tmp/cert.pem /etc/ssl/certs/",
            "docker_compose": {
              "secrets": {
                "ssl_cert": {
                  "file": "./certs/certificate.pem"
                }
              },
              "services": {
                "app": {
                  "secrets": ["ssl_cert"]
                }
              }
            }
          }
        },
        "SSL_PRIVATE_KEY": {
          "description": "SSL private key file",
          "mount_type": "secret",
          "required_for": ["HTTPS servers"],
          "mode_minimum": "advanced",
          "security_level": "critical",
          "example_usage": {
            "docker_compose": {
              "secrets": {
                "ssl_key": {
                  "file": "./certs/private_key.pem"
                }
              },
              "services": {
                "app": {
                  "secrets": ["ssl_key"]
                }
              }
            }
          },
          "warning": "NEVER commit private keys to Git! Keep them in .gitignore"
        }
      }
    },
    "custom": {
      "description": "User-defined custom secrets (YOLO mode)",
      "mode_minimum": "yolo",
      "secrets": {
        "CUSTOM_SECRET_EXAMPLE": {
          "description": "Example custom secret - users define their own",
          "mount_type": "any",
          "required_for": ["Custom applications"],
          "mode_minimum": "yolo",
          "security_level": "critical",
          "example_usage": {
            "dockerfile": "# Use secret mounts for any custom secrets\nRUN --mount=type=secret,id=custom_secret \\\n    CUSTOM_SECRET=$(cat /run/secrets/custom_secret) && \\\n    custom_setup.sh"
          }
        }
      }
    }
  },
  "mount_types": {
    "secret": {
      "description": "Docker secret mount (file-based, most secure)",
      "default_location": "/run/secrets/<secret_id>",
      "mode_minimum": "advanced",
      "best_for": ["API keys", "Passwords", "Certificates"],
      "example": "RUN --mount=type=secret,id=api_key cat /run/secrets/api_key"
    },
    "ssh": {
      "description": "SSH agent mount for Git authentication",
      "default_location": "$SSH_AUTH_SOCK",
      "mode_minimum": "intermediate",
      "best_for": ["Git operations", "SSH authentication"],
      "example": "RUN --mount=type=ssh git clone git@github.com:private/repo.git"
    },
    "env": {
      "description": "VS Code input variables (prompted at container start)",
      "default_location": "Environment variable",
      "mode_minimum": "intermediate",
      "best_for": ["Development credentials", "Non-production secrets"],
      "example": {
        "inputs": {
          "apiKey": {
            "type": "promptString",
            "password": true
          }
        },
        "containerEnv": {
          "API_KEY": "${input:apiKey}"
        }
      }
    }
  },
  "mode_defaults": {
    "basic": {
      "secret_count": 0,
      "categories": [],
      "notes": "Basic mode uses default credentials for development only"
    },
    "intermediate": {
      "secret_count": "1-2",
      "categories": ["git_auth"],
      "notes": "Git authentication via VS Code input variables"
    },
    "advanced": {
      "secret_count": "5+",
      "categories": ["git_auth", "database_creds", "api_secrets", "cloud_creds", "ssl_certs"],
      "notes": "Comprehensive secret management with Docker secret mounts"
    },
    "yolo": {
      "secret_count": "custom",
      "categories": ["all"],
      "notes": "Full flexibility with all secret handling patterns"
    }
  },
  "best_practices": [
    "NEVER use ARG or ENV for secrets - they persist in image layers and history",
    "Use Docker secret mounts (--mount=type=secret) for build-time secrets",
    "Use VS Code input variables with password:true for runtime secrets in development",
    "Mount credentials from host for cloud provider CLIs (~/.aws, ~/.config/gcloud, ~/.azure)",
    "Add all secret files to .gitignore",
    "Use different secrets for development and production",
    "Rotate secrets regularly",
    "Use SSH agent forwarding for Git operations when possible",
    "Never commit .env files with real credentials"
  ]
}
