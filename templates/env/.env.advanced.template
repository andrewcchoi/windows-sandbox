# Advanced Mode Environment Template
# Comprehensive configuration with cloud integrations and strict security
# Copy to .env and customize if needed

# ============================================================================
# Container Configuration
# ============================================================================

# Timezone
TZ=UTC

# Firewall mode (strict recommended for advanced mode)
FIREWALL_MODE=strict
FIREWALL_LOG_LEVEL=info

# Claude Code version
CLAUDE_CODE_VERSION=latest

# ============================================================================
# Build Configuration
# ============================================================================

# Language versions (customizable via docker-compose build args)
PYTHON_VERSION=3.12
NODE_VERSION=20
GO_VERSION=1.22
RUST_VERSION=stable
JAVA_VERSION=17

# ============================================================================
# Runtime Environment
# ============================================================================

# Node.js environment
NODE_ENV=development

# Python configuration
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1

# Go configuration
GOPATH=/go
GOBIN=/go/bin

# Rust configuration
RUST_BACKTRACE=1

# Java configuration
JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64

# ============================================================================
# Database Configuration (PostgreSQL)
# ============================================================================

# PostgreSQL connection (use VS Code input variables for passwords!)
POSTGRES_USER=sandbox_user
# POSTGRES_PASSWORD=${input:dbPassword}  # Use input variable instead!
POSTGRES_PASSWORD=devpassword  # Development only - CHANGE FOR PRODUCTION
POSTGRES_DB=sandbox_dev
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Full database URL (use input variables for production)
DATABASE_URL=postgresql://sandbox_user:devpassword@postgres:5432/sandbox_dev

# ============================================================================
# Alternative Databases
# ============================================================================

# MySQL
MYSQL_ROOT_PASSWORD=rootpassword  # CHANGE FOR PRODUCTION
MYSQL_DATABASE=sandbox_dev
MYSQL_USER=sandbox_user
MYSQL_PASSWORD=devpassword  # CHANGE FOR PRODUCTION

# MongoDB
MONGO_INITDB_ROOT_USERNAME=root
MONGO_INITDB_ROOT_PASSWORD=rootpassword  # CHANGE FOR PRODUCTION
MONGO_INITDB_DATABASE=sandbox_dev

# ============================================================================
# Cache Configuration
# ============================================================================

# Redis connection
REDIS_HOST=redis
REDIS_PORT=6379
# REDIS_PASSWORD=${input:redisPassword}  # Use for production

# Memcached
MEMCACHED_HOST=memcached
MEMCACHED_PORT=11211

# ============================================================================
# Message Queue Configuration
# ============================================================================

# RabbitMQ
RABBITMQ_DEFAULT_USER=admin
RABBITMQ_DEFAULT_PASS=change_this_password  # CHANGE FOR PRODUCTION
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672

# Kafka (uncomment if using)
# KAFKA_BROKER=kafka:9092
# KAFKA_ZOOKEEPER=zookeeper:2181

# ============================================================================
# Cloud Provider Configuration
# ============================================================================

# AWS Configuration
# WARNING: NEVER set AWS_ACCESS_KEY_ID or AWS_SECRET_ACCESS_KEY here!
# Use Docker secrets or mount ~/.aws from host
AWS_REGION=us-east-1
# AWS_PROFILE=default  # If using mounted credentials

# Google Cloud Platform
# WARNING: NEVER set GOOGLE_APPLICATION_CREDENTIALS as plain text!
# Use Docker secret mount for service account key
GCP_PROJECT_ID=your-project-id
# GOOGLE_APPLICATION_CREDENTIALS=/run/secrets/gcp_key.json

# Azure
AZURE_SUBSCRIPTION_ID=your-subscription-id
AZURE_TENANT_ID=your-tenant-id

# ============================================================================
# API Keys and Tokens
# ============================================================================

# CRITICAL: Use VS Code input variables with password:true for ALL API keys!
# Never commit real API keys to Git!

# GitHub Token (use input variable)
# GITHUB_TOKEN=${input:githubToken}

# OpenAI API Key (use input variable)
# OPENAI_API_KEY=${input:openaiKey}

# Anthropic API Key (use input variable)
# ANTHROPIC_API_KEY=${input:anthropicKey}

# Stripe (use Docker secrets for production)
# STRIPE_SECRET_KEY=${input:stripeSecretKey}

# SendGrid (use Docker secrets for production)
# SENDGRID_API_KEY=${input:sendgridKey}

# ============================================================================
# SSL/TLS Configuration
# ============================================================================

# SSL certificate paths (mount as Docker secrets)
# SSL_CERT_PATH=/run/secrets/ssl_cert
# SSL_KEY_PATH=/run/secrets/ssl_key

# ============================================================================
# Monitoring and Logging
# ============================================================================

# Log level
LOG_LEVEL=info

# Sentry (error tracking)
# SENTRY_DSN=${input:sentryDsn}

# ============================================================================
# Resource Limits
# ============================================================================

# Container resource limits (configured in docker-compose.yml)
# These are informational - actual limits set in compose file
# CPU_LIMIT=2.0
# MEMORY_LIMIT=4g

# ============================================================================
# Security Notes - READ CAREFULLY!
# ============================================================================

# CRITICAL SECURITY REQUIREMENTS:
#
# 1. NEVER use this file for production credentials
# 2. NEVER commit real passwords, API keys, or tokens to Git
# 3. ADD .env to .gitignore immediately
#
# 4. For API keys and tokens, use VS Code input variables:
#    - Set in devcontainer.json "inputs" section
#    - Reference with ${input:variableName}
#    - Set password:true for sensitive values
#
# 5. For cloud credentials, use one of these methods:
#    - Mount from host: ~/.aws, ~/.config/gcloud, ~/.azure
#    - Use Docker secret mounts during build
#    - NEVER use environment variables for credentials
#
# 6. For database passwords in production:
#    - Use Docker secrets (preferred)
#    - Use VS Code input variables (development)
#    - Rotate passwords regularly
#
# 7. Change ALL default passwords:
#    - Database passwords (PostgreSQL, MySQL, MongoDB)
#    - Message queue passwords (RabbitMQ)
#    - Cache passwords (Redis)
#
# 8. Enable strict firewall mode with custom allowlist
#
# For comprehensive security guidance, see:
# - docs/SECRETS.md - Secure credential handling
# - docs/VARIABLES.md - VS Code input variable patterns
# - docs/security-model.md - Overall security architecture
