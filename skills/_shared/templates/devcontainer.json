{
  "name": "{{PROJECT_NAME}}",
  "dockerComposeFile": "../docker-compose.yml",
  "service": "app",
  "workspaceFolder": "/workspace",
  "remoteUser": "node",
  "updateRemoteUserUID": true,
  "shutdownAction": "stopCompose",

  "customizations": {
    "vscode": {
      "settings": {
        "terminal.integrated.defaultProfile.linux": "zsh",
        "terminal.integrated.profiles.linux": {
          "zsh": {
            "path": "/bin/zsh"
          }
        }
        // Dotfiles: Personalize your container with your shell configs, aliases, and preferences
        // Uncomment and configure to use your dotfiles repository:
        // "dotfiles.repository": "https://github.com/YOUR_USERNAME/dotfiles",
        // "dotfiles.targetPath": "~/dotfiles",
        // "dotfiles.installCommand": "install.sh"
      },
      "extensions": [
        "anthropic.claude-code",
        "ms-azuretools.vscode-docker",
        "redhat.vscode-yaml",
        "eamodio.gitlens",
        "PKief.material-icon-theme",
        "johnpapa.vscode-peacock"
      ]
    }
  },

  // Lifecycle hooks (in execution order):
  // 1. initializeCommand - runs on HOST before container creation (useful for host-side setup)
  // 2. onCreateCommand - runs inside container after creation, before postCreateCommand
  // 3. postCreateCommand - runs after container is created (main setup script)
  // 4. updateContentCommand - runs when container is updated/rebuilt
  // 5. postStartCommand - runs each time the container starts
  // 6. postAttachCommand - runs each time VS Code attaches to the container

  "initializeCommand": "",
  "onCreateCommand": "",
  "postCreateCommand": ".devcontainer/setup-claude-credentials.sh",
  "updateContentCommand": "",
  "postStartCommand": "echo 'DevContainer ready!'",
  "postAttachCommand": "",
  "waitFor": "postCreateCommand",

  "forwardPorts": [8000, 3000, 5432, 6379],

  // Environment Variables:
  // - containerEnv: Set at container build time, available in Dockerfile
  // - remoteEnv: Set at runtime, can reference host env vars with ${localEnv:VAR}
  // - Use .env file for secrets (not committed to git)

  "containerEnv": {
    "DEVCONTAINER": "true",
    "TZ": "America/Los_Angeles"
  },

  "remoteEnv": {
    "PATH": "/usr/local/bin:${containerEnv:PATH}",
    "FIREWALL_MODE": "permissive",
    // Inherit from host (if set):
    "ANTHROPIC_API_KEY": "${localEnv:ANTHROPIC_API_KEY}",
    "OPENAI_API_KEY": "${localEnv:OPENAI_API_KEY}",
    "GITHUB_TOKEN": "${localEnv:GITHUB_TOKEN}"
  },

  "features": {}
}
